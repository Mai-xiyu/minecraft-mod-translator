# 🔧 硬编码检测功能完整使用指南

> **作者：饩雨**  
> **更新时间：2025年6月10日**  
> **版本：v1.0 - 首次发布**

---

## 📋 功能概述

硬编码检测功能是Minecraft模组翻译工具的重要突破性功能，能够检测和翻译模组代码中直接硬编码的英文文本。这些文本通常无法通过传统的语言文件汉化方式处理。

### 🎯 解决的问题

- **Component.literal()硬编码** - Minecraft新版本组件系统中的硬编码文本
- **GUI界面文本** - 按钮、标签等界面元素的固定文本  
- **物品描述硬编码** - 直接写在代码中的物品说明文字
- **悬浮提示文本** - Tooltip等提示信息的硬编码内容

---

## 🚀 快速开始

### 第一步：准备工作
1. 确保已上传Minecraft模组JAR文件
2. 配置好AI翻译API（OpenAI、DeepSeek等）
3. 点击主界面的"硬编码检测"按钮

### 第二步：配置检测设置
在弹出的检测窗口中：

**检测类型选择：**
- ✅ **Component.literal()** - 检测Minecraft组件硬编码（推荐）
- ✅ **字符串字面量** - 检测普通字符串硬编码
- ⚠️ **悬浮提示文本** - 检测Tooltip相关文本（可选）

**处理方式：**
- 🔍 **仅生成报告** - 安全模式，只分析不修改
- ⚙️ **尝试字节码修改** - 实验模式，尝试直接修改（谨慎使用）

**过滤条件：**
- 最小文本长度：建议设置为3-5个字符
- 排除纯数字：避免检测版本号等数字
- 排除单个字符：过滤单字母变量名

### 第三步：开始检测
1. 点击"开始扫描"按钮
2. 系统会分析JAR文件中的所有class文件
3. 等待扫描完成（时间取决于模组大小）

### 第四步：查看结果
扫描完成后会显示：
- **检测统计** - 总数、已翻译数、Component调用数
- **详细列表** - 每个硬编码文本的原文、翻译、位置信息
- **上下文信息** - 文本的使用场景和类型

---

## 💡 使用技巧

### 🎯 最佳实践

1. **先体验演示**
   - 点击"模拟演示"按钮体验功能
   - 了解检测结果的展示方式
   - 熟悉操作流程

2. **合理配置过滤**
   - 首次使用建议启用所有过滤条件
   - 根据结果调整最小文本长度
   - 逐步放宽过滤条件以发现更多文本

3. **分批处理**
   - 大型模组建议分批翻译
   - 先处理Component.literal()类型
   - 再处理其他类型的硬编码

4. **验证翻译质量**
   - 检查AI翻译的准确性
   - 对照游戏内实际显示效果
   - 手动调整不合适的翻译

### ⚠️ 注意事项

1. **备份原文件**
   ```
   在应用任何修改前，请务必备份原始JAR文件！
   ```

2. **实验性功能**
   - 字节码修改功能尚在实验阶段
   - 建议优先使用"仅生成报告"模式
   - 修改后的模组需要充分测试

3. **兼容性考虑**
   - 字节码修改可能影响模组稳定性
   - 某些模组可能有防篡改机制
   - 修改后可能需要重新签名

---

## 📊 检测结果详解

### 统计信息说明
- **总计** - 检测到的硬编码文本总数
- **已翻译** - 成功翻译的文本数量  
- **Component调用** - Component.literal()调用次数

### 文本条目信息
每个检测到的文本包含：
- **原文** - 检测到的英文硬编码文本
- **翻译** - AI生成的中文翻译
- **类型** - component/tooltip/gui/string
- **上下文** - 文本的使用场景
- **位置** - 所在的class文件路径

### 操作选项
- **选择框** - 勾选要处理的文本
- **导出报告** - 生成JSON格式的详细报告
- **应用修改** - 执行字节码修改（实验功能）

---

## 🔧 高级功能

### 自定义过滤规则

可以通过修改过滤条件来优化检测结果：

```javascript
// 示例：自定义过滤逻辑
function isValidHardcodedString(str, settings) {
    // 排除Minecraft内部标识符
    if (str.startsWith('minecraft:')) return false;
    
    // 只保留包含大写字母的文本（可能是用户界面文本）
    if (!/[A-Z]/.test(str)) return false;
    
    // 排除文件扩展名
    if (/\.(json|png|txt)$/.test(str)) return false;
    
    return true;
}
```

### 批量处理工作流

1. **准备阶段**
   - 整理待处理的模组列表
   - 统一API配置
   - 准备术语对照表

2. **检测阶段** 
   - 逐个模组进行硬编码检测
   - 导出每个模组的检测报告
   - 汇总常见硬编码模式

3. **翻译阶段**
   - 批量翻译检测到的文本
   - 人工校验翻译质量
   - 建立模组专用术语库

4. **应用阶段**
   - 谨慎应用字节码修改
   - 逐个测试修改后的模组
   - 记录修改日志

---

## 🛠️ 故障排除

### 常见问题

**Q: 扫描时提示"没有找到class文件"**
A: 确认上传的是有效的JAR文件，不是压缩包或其他格式

**Q: 检测到的文本太多，如何筛选？**
A: 调整过滤条件，提高最小文本长度，启用排除选项

**Q: 翻译质量不理想怎么办？**
A: 
- 检查API配置是否正确
- 尝试不同的AI服务商
- 使用自定义术语表提高准确性

**Q: 字节码修改后模组无法运行**
A: 
- 还原到备份的原始文件
- 检查模组是否有数字签名
- 尝试仅使用报告模式

### 错误代码说明

- **HC001** - JAR文件读取失败
- **HC002** - 字节码解析错误  
- **HC003** - API翻译失败
- **HC004** - 文件写入权限不足

---

## 📈 性能优化

### 扫描性能
- 大型模组（>50MB）扫描时间约2-5分钟
- 可以通过调整过滤条件减少处理时间
- 建议关闭不必要的检测类型

### 翻译性能
- 翻译速度取决于API响应时间
- 建议使用较快的API服务（如DeepSeek）
- 可以分批处理减少API调用频率

### 内存使用
- 大型模组可能占用较多内存
- 建议在性能较好的设备上运行
- 处理完成后及时清理缓存

---

## 🌟 未来计划

### 即将推出的功能
- **智能上下文分析** - 更准确的文本分类
- **批量模组处理** - 支持同时处理多个模组
- **翻译质量评估** - 自动评估翻译准确性
- **社区术语库** - 共享的模组专用术语

### 长期发展方向
- **深度字节码分析** - 支持更复杂的硬编码模式
- **可视化编辑器** - 图形化的翻译编辑界面
- **版本兼容检查** - 自动检测Minecraft版本兼容性
- **云端协作** - 支持团队协作翻译

---

## 💬 反馈与支持

### 问题反馈
如果在使用过程中遇到问题：
1. 查看浏览器控制台的错误信息
2. 导出检测报告以便问题定位
3. 记录具体的操作步骤和错误现象
4. 提供模组名称和版本信息

### 功能建议
欢迎提出改进建议：
- 新的硬编码检测模式
- 更好的过滤算法
- 用户界面优化
- 性能提升方案

---

**🎯 项目目标**: 让Minecraft模组汉化变得更加完整和专业  
**👨‍💻 作者**: 饩雨  
**📅 更新时间**: 2025年6月10日  
**🔧 功能版本**: 硬编码检测 v1.0**

---

*本指南随功能更新持续完善，最新版本请访问项目主页。*
