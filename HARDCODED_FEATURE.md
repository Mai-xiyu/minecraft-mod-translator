# 硬编码汉化工具功能说明

**作者：饩雨**  
**更新时间：2025年6月12日**

---

## 🎯 功能概述

全新的**硬编码汉化工具**现已集成到Minecraft模组翻译器中！这是一个独立的工具页面，专门用于检测和翻译Minecraft模组代码中的硬编码英文文本。

## 🚀 快速访问

1. **从主界面访问**：点击主界面的"硬编码汉化工具"按钮
2. **直接访问**：直接打开 `hardcoded-translator.html` 页面

## ✨ 主要特性

### 📁 智能文件处理
- **JAR文件解析**：自动解压和分析Minecraft模组JAR文件
- **字节码扫描**：深度分析Java class文件中的字符串常量
- **多种格式支持**：兼容各种模组框架和结构

### 🔍 精确文本检测
- **Component.literal() 检测**：识别Minecraft组件硬编码调用
- **字符串字面量检测**：扫描代码中的英文字符串常量
- **悬浮提示文本**：检测Tooltip等界面相关文本
- **智能过滤**：自动排除技术标识符和无意义字符串

### 🤖 AI智能翻译
- **多平台支持**：DeepSeek、OpenAI GPT、Google Translate
- **批量翻译**：高效处理大量文本
- **上下文理解**：根据代码上下文提供准确翻译

### 📊 直观结果展示
- **统计概览**：总计数量、翻译进度、类型分布
- **详细列表**：原文、译文、位置、类型信息
- **交互操作**：选择、编辑、导出功能

## 🛠️ 使用流程

### 第1步：上传JAR文件
```
- 拖拽或点击上传.jar格式的Minecraft模组文件
- 支持最大30MB的文件大小
- 自动验证文件格式和完整性
```

### 第2步：配置检测设置
```
检测类型：
☑️ Component.literal() 硬编码
☑️ 字符串字面量
☐ 悬浮提示文本

过滤设置：
- 最小长度：3 字符
☑️ 排除纯数字
☑️ 排除单字符
```

### 第3步：配置AI翻译
```
选择翻译服务商：
- DeepSeek（推荐）
- OpenAI GPT-3.5/4
- Google Translate
- 自定义API

输入对应的API密钥
```

### 第4步：开始扫描和翻译
```
- 点击"开始扫描硬编码文本"按钮
- 实时显示扫描和翻译进度
- 自动完成检测和翻译流程
```

## 📋 检测结果说明

### 统计信息
- **总计硬编码文本**：发现的硬编码字符串数量
- **已翻译**：成功翻译的文本数量
- **Component调用**：Component.literal()类型的数量

### 文本列表
每个检测到的硬编码文本包含：
- **原文**：源代码中的英文文本
- **译文**：AI生成的中文翻译
- **类型**：component/string/tooltip/gui
- **位置**：在JAR文件中的具体位置

### 操作功能
- **全选/取消**：批量选择要处理的文本
- **导出报告**：生成JSON格式的详细报告
- **下载修改**：生成包含翻译的新JAR文件（开发中）

## 🎭 演示功能

点击"运行演示"按钮可以体验完整的检测流程，无需上传真实文件：

```
演示数据包含：
- Magic Wand → 魔法棒
- A powerful magical item → 一件强大的魔法物品
- Enchanted Sword → 附魔剑
- Right-click to activate → 右键点击激活
- Configuration → 配置
```

## 📄 导出报告格式

生成的JSON报告包含完整的检测和翻译信息：

```json
{
  "timestamp": "2025-06-12T10:30:00.000Z",
  "fileName": "example-mod-1.0.jar",
  "totalCount": 15,
  "selectedCount": 12,
  "items": [
    {
      "original": "Magic Wand",
      "translation": "魔法棒",
      "type": "component",
      "location": "com/example/mod/items/MagicWand.class"
    }
  ]
}
```

## 🔧 技术特点

### 模块化设计
- **独立页面**：与主翻译工具分离，便于维护
- **专用脚本**：`hardcoded-translator.js` 专门处理硬编码功能
- **共享样式**：复用主项目的CSS样式系统

### 字节码解析
- **Java Class解析**：直接分析编译后的字节码
- **常量池扫描**：提取字符串常量表中的文本
- **上下文分析**：判断字符串的使用场景和类型

### 安全保障
- **本地处理**：所有操作在浏览器内完成
- **隐私保护**：文件和API密钥不会上传到服务器
- **错误恢复**：完善的异常处理和用户提示

## 🎯 使用建议

### 最佳实践
1. **先运行演示**：熟悉工具操作流程
2. **合理配置过滤**：避免检测到无意义的技术字符串
3. **仔细检查翻译**：AI翻译可能需要人工审核和调整
4. **备份原文件**：在应用修改前保留原始JAR文件

### 注意事项
- **API限制**：注意各翻译服务的使用限额
- **文件大小**：大型模组可能需要较长处理时间
- **翻译质量**：复杂的技术术语可能需要手动调整

## 🚀 未来计划

- **字节码修改**：完善JAR文件直接修改功能
- **批量处理**：支持同时处理多个JAR文件
- **翻译缓存**：保存翻译历史避免重复翻译
- **自定义规则**：支持用户定义检测和过滤规则

---

**🎮 让Minecraft模组汉化变得更简单、更智能！**
